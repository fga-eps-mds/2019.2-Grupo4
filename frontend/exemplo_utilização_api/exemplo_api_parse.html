<!DOCTYPE HTML>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">
	<script>
		function parseMarkdownToHtml() {
			const url = `http://localhost:3000/parse`;
			const markdown = document.getElementById('txt-markdown').value;
			let loadingIMG = document.getElementById('loading');
			let previewDIV = document.getElementById('preview');
			loadingIMG.style.display = 'block';
			previewDIV.innerHTML = '';

			let ajax = new XMLHttpRequest();
			ajax.open('POST', url);
			ajax.setRequestHeader('Content-type', 'application/json; charset=utf-8');
			ajax.onreadystatechange = function () {
				if (ajax.readyState == 4 && ajax.status == 200) {
					let responseJson = JSON.parse(ajax.responseText);
					loadingIMG.style.display = 'none';
					previewDIV.insertAdjacentHTML('beforeend', responseJson.html);
				}
			}
			ajax.send(JSON.stringify({ markdown }));
		}
	</script>
</head>

<body>

	<div>
		<h1>Markdown:</h1>
		<textarea cols="50" rows="10" name="markdown" id="txt-markdown">
		</textarea>
		<button onclick="parseMarkdownToHtml()">Enviar</button>
	</div>

	<div id="loading" style="display: none;">
		<h2>Aguarde...</h2>
	</div>

	<h1>Preview:</h1>
	<div id="preview" style="">

	</div>

</body>

</html>